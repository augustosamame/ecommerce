<%= simple_form_for([:backoffice, @backoffice_payment_method]) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :name, label: "Name (Card, Manual or Bank Payment)" %>
    <%= f.input :processor, label: "Name of Credit Card Processor" %>
    <%= f.input :account, label: "Account Id of Payment Processor" %>
    <%= f.input :key, label: "Auth Key for Payment Processor" %>
    <%= f.input :secret, label: "Secret Key for Payment Processor" %>
    <%= f.input :callback_url, label: "Callback Url for Payment Processor" %>
    <%= f.input :success_marks_as_paid, label: "Succesful Processing Will Mark Order as Paid" %>

    <%= f.label "Payment Method Logo" %>
    <div class="form-group">
      <% if f.object.logo? %>
        <%= image_tag f.object.logo, id: "img_actual", class: "img-thumbnail", :height => "200", :width => "200" %>
      <% end %>
      <img alt="your image" class="img-thumbnail hidden" height="200" id="img_prev" src="#" width="200"/>
      <br/>
      <span class="btn btn-default btn-file">
        <%= f.file_field :logo, id: "file-image-upload" %>
      </span>
      <%= f.hidden_field :logo_cache %>
    </div>

    <%= f.input :pre_message, label: "Message to show in Payment Message List" %>
    <%= f.input :post_message, label: "Message to show after Payment Method chosen" %>
  </div>

  <div class="form-actions">
    <%= f.button :submit, class: "btn btn-primary" %>
  </div>
<% end %>

<script>

  document.addEventListener("DOMContentLoaded", function(event) {
  $(function() {
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
          $('#img_prev').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }

    $("#file-image-upload").change(function(){
      $('#img_prev').removeClass('hidden');
      $('#img_actual').addClass('hidden');
      readURL(this);
    });
  });
  });


</script>
